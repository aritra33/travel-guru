{"ast":null,"code":"import _objectSpread from\"D:\\\\Programming-hero\\\\travel-guru-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Programming-hero\\\\travel-guru-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{Card}from'react-bootstrap';import{useHistory,useLocation}from'react-router-dom';import{UserContext}from'../../App';import facebook from\"../../Icon/fb.png\";import google from\"../../Icon/google.png\";import'./Login.css';import{facebookSignIn,googleSignIn,initializeLoginFramework,signOutAll,signInUserWithEmailAndPassword,createUserWithEmailAndPassword}from'./logInManager';var Login=function Login(){var _useState=useState({isSignIn:false,name:'',email:'',photo:''}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];initializeLoginFramework();var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),logged=_useContext2[0],setLogged=_useContext2[1];var history=useHistory();var location=useLocation();var _ref=location.state||{from:{pathname:\"/\"}},from=_ref.from;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),newUser=_useState4[0],setNewUser=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),input=_useState6[0],setInput=_useState6[1];var register=function register(){setNewUser(true);};var login=function login(){setNewUser(false);};var facebookLogin=function facebookLogin(){facebookSignIn().then(function(response){logResponse(response,true);});};var googleLogin=function googleLogin(){googleSignIn().then(function(response){logResponse(response,true);});};var logResponse=function logResponse(response,redirect){setUser(response);setLogged(response);if(redirect){history.replace(from);}};var submit=function submit(event){if(newUser&&user.email&&user.password){user.name=\"\".concat(user.fName,\" \").concat(user.lName);createUserWithEmailAndPassword(user.name,user.email,user.password).then(function(response){logResponse(response,true);});}if(!newUser&&user.email&&user.password){signInUserWithEmailAndPassword(user.email,user.password).then(function(response){logResponse(response,true);});}event.preventDefault();};var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var validate=function validate(event){var isFieldValid=true;if(event.target.name==='fName'){isFieldValid=/^([A-Za-z]{3,30})$/.test(event.target.value);if(isFieldValid){input.fName=false;}else{input.fName=true;}}if(event.target.name==='lName'){isFieldValid=/^([A-Za-z]{3,30})$/.test(event.target.value);if(isFieldValid){input.lName=false;}else{input.lName=true;}}if(event.target.name==='email'){isFieldValid=/\\S+@\\S+\\.\\S+/.test(event.target.value);if(isFieldValid){input.email=false;}else{input.email=true;}}if(event.target.name==='password'){isFieldValid=/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])([a-zA-Z0-9]{8})$/.test(event.target.value);if(isFieldValid){input.password=false;}else{input.password=true;}}if(event.target.name==='confirmPassword'){isFieldValid=event.target.value===password;if(isFieldValid){input.confirmPassword=false;}else{input.confirmPassword=true;}}if(isFieldValid){var _newUser=_objectSpread({},user);_newUser[event.target.name]=event.target.value;setUser(_newUser);}else{var _newUser2=_objectSpread({},user);_newUser2[event.target.name]='';setUser(_newUser2);}};var signOut=function signOut(){signOutAll().then(function(response){logResponse(response,false);});};return/*#__PURE__*/React.createElement(\"div\",null,!logged.isSignIn?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-1 col-1 col-lg-3\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-sm-8 col-10 col-sm-10 col-lg-6 log\"},/*#__PURE__*/React.createElement(\"div\",{className:\"InUp\"},newUser?/*#__PURE__*/React.createElement(\"h5\",{className:\"head\"},\"Create an account\"):/*#__PURE__*/React.createElement(\"h5\",{className:\"head\"},\"Sign In\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:submit},newUser&&/*#__PURE__*/React.createElement(\"input\",{onBlur:validate,type:\"text\",placeholder:\"First Name\",name:\"fName\",id:\"\",required:true}),newUser&&input.fName&&/*#__PURE__*/React.createElement(\"p\",{className:\"warning\"},\"Must contain only letters and between 3 and 30\"),newUser&&/*#__PURE__*/React.createElement(\"input\",{onBlur:validate,type:\"text\",placeholder:\"Last Name\",name:\"lName\",id:\"\",required:true}),newUser&&input.lName&&/*#__PURE__*/React.createElement(\"p\",{className:\"warning\"},\"Must contain only letters and between 3 and 30\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",onBlur:validate,placeholder:\"Email\",name:\"email\",id:\"\",required:true}),newUser&&input.email&&/*#__PURE__*/React.createElement(\"p\",{className:\"warning\"},\"Enter a valid email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:function onChange(event){return setPassword(event.target.value);},onBlur:validate,placeholder:\"Password\",name:\"password\",id:\"\",required:true}),newUser&&input.password&&/*#__PURE__*/React.createElement(\"p\",{className:\"warning\"},\"Password Must contain 8 character, a uppercase and letter\"),newUser&&/*#__PURE__*/React.createElement(\"input\",{onBlur:validate,type:\"password\",placeholder:\"Confirm Password\",name:\"confirmPassword\",id:\"\",required:true}),newUser&&input.confirmPassword&&/*#__PURE__*/React.createElement(\"p\",{className:\"warning\"},\"Password Mismatch\"),newUser?/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn-create\",value:\"Create an account\"}):/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn-create\",value:\"Sign In\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"warning\",style:{color:'red'}},user.error),newUser?/*#__PURE__*/React.createElement(\"p\",null,\"Already have an account ? \",/*#__PURE__*/React.createElement(\"button\",{onClick:login,className:\"toggle\"},\"Login\"),\" \"):/*#__PURE__*/React.createElement(\"p\",null,\"Don't have an account ? \",/*#__PURE__*/React.createElement(\"button\",{onClick:register,className:\"toggle\"},\"Register here!\"),\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"line d-flex\"},/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Or\"),/*#__PURE__*/React.createElement(\"hr\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"social-btn\"},/*#__PURE__*/React.createElement(\"button\",{onClick:facebookLogin},/*#__PURE__*/React.createElement(\"div\",{className:\"facebook d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(\"img\",{src:facebook,alt:\"Facebook\"}),/*#__PURE__*/React.createElement(\"p\",null,\"Continue With Facebook\"),/*#__PURE__*/React.createElement(\"p\",null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"social-btn\"},/*#__PURE__*/React.createElement(\"button\",{onClick:googleLogin},/*#__PURE__*/React.createElement(\"div\",{className:\"google d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(\"img\",{src:google,alt:\"Google\"}),/*#__PURE__*/React.createElement(\"p\",null,\"Continue With Google\"),/*#__PURE__*/React.createElement(\"p\",null))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-1 col-1 col-lg-3\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-1 col-1 col-lg-3\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-sm-8 col-10 col-sm-10 col-lg-6\"},/*#__PURE__*/React.createElement(\"img\",{src:user.image,alt:\"\"}),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,logged.email),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"card-text\"},logged.name),/*#__PURE__*/React.createElement(Card.Img,{src:logged.photo,alt:logged.name}),/*#__PURE__*/React.createElement(Card.Text,null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-create\",onClick:signOut},\" Sign Out \")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-1 col-1 col-lg-3\"})));};export default Login;","map":{"version":3,"sources":["D:/Programming-hero/travel-guru-master/src/Component/Login/Login.js"],"names":["React","useContext","useState","Card","useHistory","useLocation","UserContext","facebook","google","facebookSignIn","googleSignIn","initializeLoginFramework","signOutAll","signInUserWithEmailAndPassword","createUserWithEmailAndPassword","Login","isSignIn","name","email","photo","user","setUser","logged","setLogged","history","location","state","from","pathname","newUser","setNewUser","input","setInput","register","login","facebookLogin","then","response","logResponse","googleLogin","redirect","replace","submit","event","password","fName","lName","preventDefault","setPassword","validate","isFieldValid","target","test","value","confirmPassword","signOut","color","error","image"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Card } from 'react-bootstrap';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { UserContext } from '../../App';\nimport facebook from \"../../Icon/fb.png\";\nimport google from \"../../Icon/google.png\";\nimport './Login.css';\nimport { facebookSignIn, googleSignIn, initializeLoginFramework, signOutAll,signInUserWithEmailAndPassword,createUserWithEmailAndPassword} from './logInManager';\nconst Login = () => {\n    const [user, setUser] = useState({\n        isSignIn: false,\n        name: '',\n        email: '',\n        photo: ''\n    });\n    initializeLoginFramework();\n    const[logged,setLogged]=useContext(UserContext);\n    const history = useHistory();\n    const location = useLocation();\n\n    let { from } = location.state || { from: { pathname: \"/\" } };\n\n    const [newUser, setNewUser] = useState(false);\n    const [input, setInput] = useState({ });\n    const register = () => {\n        setNewUser(true);\n    }\n    const login = () => {\n        setNewUser(false);\n    }\n    const facebookLogin = () => {\n        facebookSignIn()\n            .then(response => {\n                logResponse(response,true);\n            })\n    }\n    const googleLogin = () => {\n        googleSignIn()\n            .then(response => {\n                logResponse(response,true);\n            })\n    }\n    const logResponse = (response,redirect) => {\n        setUser(response);\n        setLogged(response);\n        if(redirect){\n            history.replace(from);\n        }\n    }\n    const submit = (event) => {\n        if (newUser && user.email && user.password) {\n            user.name=`${user.fName} ${user.lName}`;\n            createUserWithEmailAndPassword(user.name,user.email, user.password)\n            .then(response => {\n                logResponse(response,true);\n            })\n        }\n        if (!newUser && user.email && user.password) {\n            signInUserWithEmailAndPassword(user.email, user.password)\n            .then(response => {\n                logResponse(response,true);\n            })\n        }\n        event.preventDefault();\n    }\n    const [password, setPassword] = useState('')\n    const validate = (event) => {\n        let isFieldValid = true;\n        if (event.target.name === 'fName') {\n            isFieldValid = /^([A-Za-z]{3,30})$/.test(event.target.value);\n            if(isFieldValid){\n                input.fName=false;\n            }\n            else{\n                input.fName=true;\n            }\n        }\n        if (event.target.name === 'lName') {\n            isFieldValid = /^([A-Za-z]{3,30})$/.test(event.target.value);\n            if(isFieldValid){\n                input.lName=false;\n            }\n            else{\n                input.lName=true;\n            }\n        }\n        if (event.target.name === 'email') {\n            isFieldValid = /\\S+@\\S+\\.\\S+/.test(event.target.value);\n            if(isFieldValid){\n                input.email=false;\n            }\n            else{\n                input.email=true;\n            }\n        }\n        if (event.target.name === 'password') {\n            isFieldValid = /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])([a-zA-Z0-9]{8})$/.test(event.target.value);\n            if(isFieldValid){\n                input.password=false;\n            }\n            else{\n                input.password=true;\n            }\n        }\n        if (event.target.name === 'confirmPassword') {\n             isFieldValid =(event.target.value === password);\n             if(isFieldValid){\n                input.confirmPassword=false;\n            }\n            else{\n                input.confirmPassword=true;\n            }\n        }\n        if (isFieldValid) {\n            const newUser = { ...user };\n            newUser[event.target.name] = event.target.value;\n            setUser(newUser);\n        } else {\n            const newUser = { ...user };\n            newUser[event.target.name] = '';\n            setUser(newUser);\n        }\n    }\n    const signOut = () => {\n        signOutAll()\n            .then(response => {\n                logResponse(response,false);\n            })\n    }\n    return (\n        <div>\n            {!logged.isSignIn ?\n            <div className=\"row\">\n                <div className=\"col-md-3 col-sm-1 col-1 col-lg-3\"></div>\n                <div className=\"col-md-6 col-sm-8 col-10 col-sm-10 col-lg-6 log\">\n                    <div className=\"InUp\">\n                        {newUser ? <h5 className=\"head\">Create an account</h5> :\n                            <h5 className=\"head\">Sign In</h5>}\n                        <form onSubmit={submit}>\n                            {newUser && <input onBlur={validate} type=\"text\" placeholder=\"First Name\" name=\"fName\" id=\"\" required/>}\n                            {newUser && input.fName && <p className=\"warning\">Must contain only letters and between 3 and 30</p>}\n                            {newUser && <input onBlur={validate} type=\"text\" placeholder=\"Last Name\" name=\"lName\" id=\"\" required/>}\n                            {newUser && input.lName && <p className=\"warning\">Must contain only letters and between 3 and 30</p>}\n                            <input type=\"email\" onBlur={validate} placeholder=\"Email\" name=\"email\" id=\"\" required/>\n                            {newUser && input.email && <p className=\"warning\">Enter a valid email</p>}\n                            <input type=\"password\" onChange={event => setPassword(event.target.value)} onBlur={validate} placeholder=\"Password\" name=\"password\" id=\"\" required/>\n                            {newUser && input.password && <p className=\"warning\">Password Must contain 8 character, a uppercase and letter</p>}\n                            {newUser && <input onBlur={validate} type=\"password\" placeholder=\"Confirm Password\" name=\"confirmPassword\" id=\"\" required/>}\n                            {newUser && input.confirmPassword && <p className=\"warning\">Password Mismatch</p>}\n                           \n                            {newUser ? <input  type=\"submit\" className=\"btn-create\" value=\"Create an account\"/> :\n                                <input type=\"submit\" className=\"btn-create\" value=\"Sign In\"/>}\n                        </form>\n                        <p className=\"warning\" style={{ color: 'red' }}>{user.error}</p>\n                        {newUser ? <p>Already have an account ? <button onClick={login} className=\"toggle\">Login</button> </p> :\n                            <p>Don't have an account ? <button onClick={register} className=\"toggle\">Register here!</button> </p>}\n                            \n\n                    </div>\n                    <div className=\"line d-flex\">\n                        <hr />\n                        <p>Or</p><hr />\n                    </div>\n                    <div className=\"social-btn\">\n                        <button onClick={facebookLogin} >\n                            <div className=\"facebook d-flex justify-content-between align-items-center\">\n                                <img src={facebook} alt=\"Facebook\" />\n                                <p>Continue With Facebook</p><p></p>\n                            </div>\n                        </button>\n                    </div>\n                    <div className=\"social-btn\">\n                        <button onClick={googleLogin}>\n                            <div className=\"google d-flex justify-content-between align-items-center\">\n                                <img src={google} alt=\"Google\" />\n                                <p>Continue With Google</p><p></p>\n                            </div>\n                        </button>\n                    </div>\n\n                </div>\n                <div className=\"col-md-3 col-sm-1 col-1 col-lg-3\"></div>\n            </div>\n                :\n                <div className=\"row\">\n                    <div className=\"col-md-3 col-sm-1 col-1 col-lg-3\"></div>\n                    <div className=\"col-md-6 col-sm-8 col-10 col-sm-10 col-lg-6\">\n                        <img src={user.image} alt=\"\" />\n                        <Card>\n                            <Card.Header>{logged.email}</Card.Header>\n                            <Card.Body>\n                                <Card.Title className=\"card-text\">{logged.name}</Card.Title>\n                                <Card.Img src={logged.photo} alt={logged.name} />\n                                <Card.Text>\n                                    \n                                </Card.Text>\n                                <button className=\"btn-create\" onClick={signOut}> Sign Out </button>\n                            </Card.Body>\n                        </Card>\n\n                    </div>\n                    <div className=\"col-md-3 col-sm-1 col-1 col-lg-3\"></div>\n                </div>\n            }\n        </div>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}